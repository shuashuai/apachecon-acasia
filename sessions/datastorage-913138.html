<!DOCTYPE HTML>

<html>
<head>
    <title>The Exploration and Practice of State Storage in Tencent Big Data Flink with Separation of Computati - Community Over Code Asia 2025 - Powered by ALC-Beijing</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'unsafe-inline' 'unsafe-eval' *; style-src 'unsafe-inline' *; img-src * data:; font-src * data:; connect-src *; frame-src * maps: ;">

    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <meta property='og:title' content='The Exploration and Practice of State Storage in Tencent Big Data Flink with Separation of Computati'/>
    <meta property='og:url' content='https://asia.communityovercode.org'/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <base href="/"/>
    
    <link rel="icon" type="image/png" href="images/favicon.ico">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css"/>

    
    <link rel="stylesheet" href="/scss/main.min.f327fac657d730f3f1b9f16418e56111a1b2dc2bb77a5c8ef7e2e089db2941bc.css">
    
    <link rel="stylesheet" href="/scss/acasia2021.min.f7f58a4c9ff35c6c173a83010ea7e86ef4f57dd469455a6bed73cb3450006a08.css">

    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.dropotron.min.js"></script>
    <noscript>
        
    </noscript>
    <link rel="stylesheet" href="css/search.css"/>
</head>

<body>


<div class="wrapper style1">

    <div id="header" class="sub-banner position-relative d-flex flex-column">
        
<nav id="nav" class="navbar navbar-expand-lg bg-transparent">
  <div class="container py-1">
    <div class="btn-wrap d-flex align-items-center justify-content-between">
        
            <a href="index.html" class="navbar-brand">
                <img class="logo-img" src="images/2025-logo.png" height="120" width="200px" ALIGN=CENTER>
            </a>
        
         <button
            onclick="changeMenuBg()"
            class="navbar-toggler" 
            type="button"
            data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
        <ul class="navbar-nav">
            
                <li class="nav-item">
                    <a class="nav-link" href="index.html">
                        Home
                    </a>
                </li>
            
            
            
                <li class="nav-item">
                    
                    <a href="/tracks.html" class="nav-link">Schedule</a>
                </li>
            
                <li class="nav-item">
                    
                    <a href="/guide/visa_letter_request.html" class="nav-link">Guide</a>
                </li>
            
                <li class="nav-item">
                    
                    <a href="/sponsor.html" class="nav-link">Sponsor</a>
                </li>
            
                <li class="nav-item">
                    
                    <a href="/venue_travel/venue.html" class="nav-link">Venue &#43; Travel</a>
                </li>
            
            
                
                    <li class="nav-item">
                        <a href="/zh/sessions/datastorage-913138.html" class="nav-link" >中文</a>
                    </li>
                
            
            <div class="ms-0 ms-lg-4">
                <a href="index.html#register" role="button" class="btn btn-warning">
                    Register
                </a>
            </div>
            
        </ul>
    </div>
  </div>
</nav>
<script>
    const isHome = "false";
    function changeMenuBg () {
        const nav = document.getElementById('nav');
        if (isHome !== 'true') {
            return;
        }
        if (nav.classList.contains('bg-custom')) {
            nav.classList.remove('bg-custom');
            nav.classList.add('bg-transparent');
        } else {
            nav.classList.add('bg-custom');
            nav.classList.remove('bg-transparent');
        }
    }

</script>

    </div>

    
    <div id="main" class="wrapper style4 page-session">

        
        <div id="content" class="container">
            <section>
                <header class="major">
                    <h3 class="text-center">The Exploration and Practice of State Storage in Tencent Big Data Flink with Separation of Computati</h3>
                    <h4>YanPeng shi</h4>
                    Chinese Session  2025-07-25 16:15 GMT&#43;8&nbsp;
                    
                        (ROOM : Mtn WanShou Hall)
                    
                    <a class="label" href="/tracks/datastorage.html">#datastorage</a></li>
                </header>

                <p>1.Background:
Flink, as a stateful stream processing system, has a state storage engine that plays a crucial role. In Flink, state is used to store intermediate results during the data stream computation process. Flink provides state read and write services for operators through the State Backend component. However, under the current architecture where computation and storage are integrated, the following issues arise:
a. Local disk limitations: The state data in RocksDB is heavily dependent on local disks, and when the local disk space is full, jobs cannot run properly.
b. Slow checkpoint generation: The large size of checkpoint state data leads to prolonged upload times. Additionally, periodic checkpoints can cause traffic spikes and CPU spikes, affecting the processing speed and throughput of the business logic itself.
c. Slow checkpoint recovery: The native recovery process requires downloading the entire checkpoint state file, which is slow in scenarios with large states.</p>
<p>2.Functional Architecture:
a. Fuse supports remote read and write: Based on the Fuse mechanism, remote storage is mounted to a local directory, allowing state to be directly stored in remote distributed storage using RocksDB&rsquo;s POSIX semantics.
b. Fast checkpoint with file sharing: In the separation of computation and storage architecture, state file data is incrementally and asynchronously persisted in remote storage during job execution. When taking a job checkpoint snapshot, only a small amount of data in the Memtable needs to be flushed to remote storage, along with the corresponding metadata.
c. Lazy loading for fast recovery: In the separation of computation and storage architecture, the state backend supports remote access to state data. During state recovery, users only need to download a small amount of metadata before the job can start processing data. Subsequently, state files will be asynchronously loaded into local disk cache based on caching strategies, enabling quick recovery of large state jobs through lazy loading.</p>
<ol start="3">
<li>
<p>Performance Optimization:
a. Read/write cache and metadata cache: Utilizing local disks as a cache, combined with RocksDB&rsquo;s own Block Cache/Memtable memory cache, forms a hot-warm-cold data hierarchy. Frequently accessed warm data is stored in memory and local cache, while infrequently accessed cold data is kept in remote storage, reducing state access latency.
b. Local cache affinity recovery scheduling: Based on TaskManager state cache files, remote state reads are minimized. During recovery scheduling, jobs are rescheduled to their previous locations whenever possible, providing better performance for the jobs.</p>
</li>
<li>
<p>Effectiveness and Benefits:
Job processing performance comparison: Through read/write caching, job performance reaches 80% of that in RocksDB Local mode.
Timeliness: The downtime during job recovery is reduced by 60%.</p>
</li>
<li>
<p>Future Plans:
Intelligent caching strategy: A more intelligent and fine-grained caching mechanism.
Asynchronous batch access to community state: Further reducing the impact of remote state access through asynchronous mechanisms.
Hot updates for underlying Fuse components: Updates to the underlying Fuse components will not affect upper-layer applications.</p>
</li>
</ol>
<h3 id="speakers">Speakers:</h3>
<p><img src="https://sessionize.com/image/8ab3-400o400o1-J6rdbW4HhzZRzSqmcX56bS.jpg" width="200" /><br/></p>
<p>YanPeng shi: Tencent senior engineer</p>
<p>Tencent Senior Engineer, graduated with a Master&rsquo;s degree from Beijing University of Posts and Telecommunications in 2021, focusing on Flink core development.</p>


                <div style="position:relative; padding-bottom:50%; width:90%; height:0">
                    <iframe src=""  class="iframe_video" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe>
                </div>

            </section>
        </div>
    </div>

    

<div id="footer">
  <section class="container">
    <header class="major">
      <h2>Connect with us</h2>
    </header>
    <div class="d-flex align-items-center justify-content-between mx-auto mb-5" style="max-width: 512px">
      <a href="https://www.facebook.com/ApacheSoftwareFoundation/">
        <img width="64" src="images/icon-facebook-128.png">
      </a>
      <a href="https://twitter.com/ApacheCon">
        <img width="64" src="images/icon-twitter-x-128.png">
      </a>
      <a href="http://s.apache.org/apachecon-slack">
        <img width="64" src="images/icon-slack-128.png">
      </a>
    </div>
		<p>Community Over Code operates under the terms of the <a href="https://www.apache.org/foundation/policies/conduct.html">Apache Software Foundation Code of Conduct</a>. </p>
    <p class="byline mb-0">Copyright 2025, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the Apache License, Version 2.0. <br />Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</div>
    </section>
</div>
</div>


</body>
</html>
